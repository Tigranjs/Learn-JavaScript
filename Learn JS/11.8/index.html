<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async/await</title>
</head>

<body>

    <script>
        // Перепишите, используя async/await


        // async function loadJson(url) {

        //     let res = await fetch(url)
        //     if (res.status == 200) {
        //         return res.json();
        //     } else {
        //         throw new Error(res.status);
        //     }
        // }

        // loadJson('no-such-user.json') // (3)
        //     .then(alert)
        //     .catch(alert); // Error: 404


        // Перепишите, используя async/await

        // class HttpError extends Error {
        //     constructor(response) {
        //         super(`${response.status} for ${response.url}`);
        //         this.name = 'HttpError';
        //         this.response = response;
        //     }
        // }

        // async function loadJson(url) {

        //     const res = await fetch(url);

        //     if (res.status === 200) {
        //         return res.json();
        //     } else {
        //         throw new HttpError(res);
        //     }
        // }

        // async function demoGithubUser() {
        //     let isLoop = true
        //     while (isLoop) {
        //         let name = prompt("Введите логин?", "iliakan");
        //         try {
        //             const res = await loadJson(`https://api.github.com/users/${name}`);
        //             isLoop = false;
        //             return res;
        //         } catch (err) {
        //             if (err instanceof HttpError && err.response.status == 404) {
        //                 alert("Такого пользователя не существует, пожалуйста, повторите ввод.");
        //             } else {
        //                 throw err;
        //             }
        //         }

        //     }
        // }

        // demoGithubUser().then(console.log)


        // Вызовите async–функцию из "обычной"

        // async function wait() {
        //     await new Promise(resolve => setTimeout(resolve, 1000));

        //     return 10;
        // }

        // function f() {
        //     wait().then(alert);
        // }

        // f()
        
    </script>

</body>

</html>